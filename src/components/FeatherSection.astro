---
import { getEntry } from "astro:content";
import { Image } from "astro:assets";
import featherImg from "../assets/visuals/feather.png";

const projectContent = await getEntry("landing", "project");
const meaningContent = await getEntry("landing", "meaning");

if (!projectContent || !meaningContent) {
    throw new Error(
        "Required content not found: project or meaning entries missing from landing collection",
    );
}

// Render markdown to HTML
const { Content: ProjectContent } = await projectContent.render();
const { Content: MeaningContent } = await meaningContent.render();
---

<section
    id="feather"
    class="grid grid-cols-1 md:grid-cols-3 gap-8 items-center px-6 py-20 relative"
>
    <!-- Left card -->
    <div
        class="bg-primary/10 p-6 rounded-xl shadow-lg md:col-span-1 order-2 md:order-1 z-10 md:-mr-6"
    >
        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-primary">
            {projectContent.data.heading}
        </h2>
        <div class="prose prose-lg text-foreground">
            <ProjectContent />
        </div>
    </div>

    <!-- Center feather image -->
    <div
        class="md:col-span-1 flex justify-center items-center order-1 md:order-2 mb-8 md:mb-0"
    >
        <Image
            src={featherImg}
            alt="Feather"
            width={240}
            height={240}
            class="w-auto max-h-[300px] drop-shadow-xl"
            loading="eager"
        />
    </div>

    <!-- Right card -->
    <div
        class="bg-primary/10 p-6 rounded-xl shadow-lg md:col-span-1 order-3 z-10 md:-ml-6"
    >
        <h2 class="text-2xl md:text-3xl font-bold mb-4 text-primary">
            {meaningContent.data.heading}
        </h2>
        <div class="prose prose-lg text-foreground">
            <MeaningContent />
        </div>
    </div>
</section>
