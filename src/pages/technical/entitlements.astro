---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AztecPattern from '../../components/decorative/AztecPattern.astro';
import GeometricBorder from '../../components/decorative/GeometricBorder.astro';
import NarrativeSidebar from '../../components/NarrativeSidebar.astro';
---

<BaseLayout
  title="Entitlements Framework"
  description="Technical documentation of the entitlements framework in ServiceNow, representing licensing agreements in the Mirador world."
>
  <!-- Title Section with Pattern -->
  <div class="relative py-20 bg-primary-800">
    <AztecPattern pattern="flow" opacity={0.15} color="#A63D2F" className="docs-header-pattern" />
    
    <div class="container mx-auto px-8 relative z-10">
      <h1 class="text-4xl font-heading font-bold text-white mb-6 tracking-wider">Entitlements Framework</h1>
      <p class="text-xl text-neutral-200 max-w-2xl">
        Technical documentation of entitlements in ServiceNow SAM, mapped to
        capability licensing agreements in the Mirador narrative.
      </p>
      <GeometricBorder type="horizontal" color="accent" className="mt-8 w-32" />
    </div>
  </div>

  <!-- Main Content -->
  <div class="bg-primary-900 py-16">
    <div class="container mx-auto px-8">
      <div class="grid grid-cols-1 lg:grid-cols-12 gap-8">
        <!-- Table Navigation Sidebar -->
        <div class="lg:col-span-2 bg-primary-800 rounded-lg p-4 h-fit sticky top-24">
          <h3 class="text-lg font-heading font-bold text-secondary-400 mb-4">Related Tables</h3>
          <div class="space-y-6">
            <div>
              <h4 class="text-sm font-bold text-accent-400 mb-2">Publishers</h4>
              <ul class="space-y-2">
                <li><a href="#core_company" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">core_company</a></li>
                <li><a href="#samp_sw_publisher" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_sw_publisher</a></li>
                <li><a href="#samp_custom_sw_publisher" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_custom_sw_publisher</a></li>
              </ul>
            </div>
            <div>
              <h4 class="text-sm font-bold text-accent-400 mb-2">Models</h4>
              <ul class="space-y-2">
                <li><a href="#cmdb_software_product_model" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">cmdb_software_product_model</a></li>
                <li><a href="#samp_custom_sw_product" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_custom_sw_product</a></li>
              </ul>
            </div>
            <div>
              <h4 class="text-sm font-bold text-accent-400 mb-2">Entitlements</h4>
              <ul class="space-y-2">
                <li><a href="#samp_sw_entitlement_definition" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_sw_entitlement_definition</a></li>
                <li><a href="#samp_sw_product_definition" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_sw_product_definition</a></li>
                <li><a href="#alm_license" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">alm_license</a></li>
              </ul>
            </div>
            <div>
              <h4 class="text-sm font-bold text-accent-400 mb-2">SaaS</h4>
              <ul class="space-y-2">
                <li><a href="#samp_sw_subscription" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">samp_sw_subscription</a></li>
              </ul>
            </div>
            <div>
              <h4 class="text-sm font-bold text-accent-400 mb-2">Installs</h4>
              <ul class="space-y-2">
                <li><a href="#cmdb_sam_sw_install" class="text-neutral-300 hover:text-accent-300 transition-colors text-sm font-mono">cmdb_sam_sw_install</a></li>
              </ul>
            </div>
          </div>
        </div>
        
        <!-- Main Documentation -->
        <div class="lg:col-span-7">
          <h2 class="text-2xl font-heading font-bold mb-4 text-accent-400">Entitlements Overview</h2>
          <GeometricBorder type="horizontal" color="accent" className="mb-6 w-24" />
          
          <p class="text-lg mb-6 text-neutral-200">
            In the ServiceNow Software Asset Management framework, entitlements represent
            the legal rights to use software capabilities. They define what capabilities
            an organization can deploy, how much they can use, and under what conditions.
          </p>
          
          <div class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-12">
            <h3 class="text-xl font-heading mb-4 text-secondary-400">Core Concepts</h3>
            <ul class="space-y-3 text-neutral-300">
              <li class="flex items-start">
                <span class="text-accent-400 mr-2">•</span>
                <p><strong>Entitlement Definitions</strong> are templates that specify how rights to use capabilities are structured</p>
              </li>
              <li class="flex items-start">
                <span class="text-accent-400 mr-2">•</span>
                <p><strong>Product Definitions</strong> map specific software products to the capabilities they contain</p>
              </li>
              <li class="flex items-start">
                <span class="text-accent-400 mr-2">•</span>
                <p><strong>Licenses</strong> represent purchased rights to use specific capabilities within defined limits</p>
              </li>
              <li class="flex items-start">
                <span class="text-accent-400 mr-2">•</span>
                <p><strong>Subscriptions</strong> are time-limited entitlements commonly used for SaaS offerings</p>
              </li>
            </ul>
          </div>
          
          <!-- Entitlements Section -->
          <h2 id="entitlements" class="text-2xl font-heading font-bold mb-4 mt-12 text-accent-400">Entitlements Tables</h2>
          <GeometricBorder type="horizontal" color="accent" className="mb-6 w-24" />
          
          <div id="samp_sw_entitlement_definition" class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8 scroll-mt-28">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-heading text-secondary-400">samp_sw_entitlement_definition</h3>
              <span class="text-xs text-neutral-400 bg-primary-700 px-2 py-1 rounded">Discovery Maps</span>
            </div>
            
            <p class="text-neutral-300 mb-4">
              This table defines templates for how software entitlements are structured. It links capability publishers
              to the types of rights they offer for their products.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">entitlement_type:</span> 
                <span class="text-neutral-200 block mt-1">Controls how usage is measured (user-based, device-based, etc.)</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">publisher:</span> 
                <span class="text-neutral-200 block mt-1">References the samp_sw_publisher that defines this entitlement</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">metric_type:</span> 
                <span class="text-neutral-200 block mt-1">How consumption is measured (count, points, cores, etc.)</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">license_model:</span> 
                <span class="text-neutral-200 block mt-1">The structure of the license (perpetual, subscription, etc.)</span>
              </div>
            </div>
            
            <div class="mt-6 text-sm">
              <h4 class="text-secondary-400 mb-2">Related Tables:</h4>
              <div class="flex flex-wrap gap-2">
                <a href="#samp_sw_publisher" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">samp_sw_publisher</a>
                <a href="#samp_sw_product_definition" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">samp_sw_product_definition</a>
                <a href="#alm_license" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">alm_license</a>
              </div>
            </div>
          </div>
          
          <div id="samp_sw_product_definition" class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8 scroll-mt-28">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-heading text-secondary-400">samp_sw_product_definition</h3>
              <span class="text-xs text-neutral-400 bg-primary-700 px-2 py-1 rounded">PPNs</span>
            </div>
            
            <p class="text-neutral-300 mb-4">
              This table defines specific software products and maps them to the capabilities they contain.
              It serves as a bridge between entitlement definitions and actual software models.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">product_identifier:</span> 
                <span class="text-neutral-200 block mt-1">Unique identifier for this product (often a PPN)</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">entitlement_definition:</span> 
                <span class="text-neutral-200 block mt-1">References the entitlement structure for this product</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">software_model:</span> 
                <span class="text-neutral-200 block mt-1">Links to cmdb_software_product_model for capability mapping</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">metric_value:</span> 
                <span class="text-neutral-200 block mt-1">Default consumption value for this product</span>
              </div>
            </div>
            
            <div class="mt-6 text-sm">
              <h4 class="text-secondary-400 mb-2">Related Tables:</h4>
              <div class="flex flex-wrap gap-2">
                <a href="#samp_sw_entitlement_definition" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">samp_sw_entitlement_definition</a>
                <a href="#cmdb_software_product_model" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">cmdb_software_product_model</a>
                <a href="#alm_license" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">alm_license</a>
              </div>
            </div>
          </div>
          
          <div id="alm_license" class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8 scroll-mt-28">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-heading text-secondary-400">alm_license</h3>
              <span class="text-xs text-neutral-400 bg-primary-700 px-2 py-1 rounded">License Records</span>
            </div>
            
            <p class="text-neutral-300 mb-4">
              This table tracks actual purchased licenses, representing the entitlements an organization
              has acquired. Each record corresponds to a right to use specific capabilities.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">product:</span> 
                <span class="text-neutral-200 block mt-1">References the product definition this license is for</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">quantity:</span> 
                <span class="text-neutral-200 block mt-1">The number of license units purchased</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">start_date/end_date:</span> 
                <span class="text-neutral-200 block mt-1">The validity period for this license</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">status:</span> 
                <span class="text-neutral-200 block mt-1">Current state of the license (active, expired, etc.)</span>
              </div>
            </div>
            
            <div class="mt-6 text-sm">
              <h4 class="text-secondary-400 mb-2">Related Tables:</h4>
              <div class="flex flex-wrap gap-2">
                <a href="#samp_sw_product_definition" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">samp_sw_product_definition</a>
                <a href="#cmdb_sam_sw_install" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">cmdb_sam_sw_install</a>
              </div>
            </div>
          </div>
          
          <!-- SaaS Section -->
          <h2 id="saas" class="text-2xl font-heading font-bold mb-4 mt-12 text-accent-400">SaaS Tables</h2>
          <GeometricBorder type="horizontal" color="accent" className="mb-6 w-24" />
          
          <div id="samp_sw_subscription" class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8 scroll-mt-28">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-heading text-secondary-400">samp_sw_subscription</h3>
              <span class="text-xs text-neutral-400 bg-primary-700 px-2 py-1 rounded">SaaS Offerings</span>
            </div>
            
            <p class="text-neutral-300 mb-4">
              This table tracks subscription-based software services, a growing segment in capability licensing.
              These are typically cloud-based capabilities accessed remotely rather than installed locally.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">subscription_id:</span> 
                <span class="text-neutral-200 block mt-1">Unique identifier for this subscription</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">product_definition:</span> 
                <span class="text-neutral-200 block mt-1">References the product being subscribed to</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">renewal_terms:</span> 
                <span class="text-neutral-200 block mt-1">Conditions for extending the subscription</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">usage_metrics:</span> 
                <span class="text-neutral-200 block mt-1">How consumption is tracked for this subscription</span>
              </div>
            </div>
            
            <div class="mt-6 text-sm">
              <h4 class="text-secondary-400 mb-2">Related Tables:</h4>
              <div class="flex flex-wrap gap-2">
                <a href="#samp_sw_product_definition" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">samp_sw_product_definition</a>
                <a href="#alm_license" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">alm_license</a>
              </div>
            </div>
          </div>
          
          <!-- Install Section -->
          <h2 id="installs" class="text-2xl font-heading font-bold mb-4 mt-12 text-accent-400">Installation Tables</h2>
          <GeometricBorder type="horizontal" color="accent" className="mb-6 w-24" />
          
          <div id="cmdb_sam_sw_install" class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8 scroll-mt-28">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-xl font-heading text-secondary-400">cmdb_sam_sw_install</h3>
              <span class="text-xs text-neutral-400 bg-primary-700 px-2 py-1 rounded">Installed Capabilities</span>
            </div>
            
            <p class="text-neutral-300 mb-4">
              This table tracks where capabilities are actually deployed in the environment.
              Each record represents an instance of a capability being used on a specific device or by a user.
            </p>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mt-6">
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">software_model:</span> 
                <span class="text-neutral-200 block mt-1">The capability that is installed</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">cmdb_ci:</span> 
                <span class="text-neutral-200 block mt-1">The configuration item where the capability is installed</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">discovery_source:</span> 
                <span class="text-neutral-200 block mt-1">How this installation was detected</span>
              </div>
              <div class="bg-primary-700 p-3 rounded">
                <span class="text-secondary-400 font-mono text-sm">install_status:</span> 
                <span class="text-neutral-200 block mt-1">Current state of the installation</span>
              </div>
            </div>
            
            <div class="mt-6 text-sm">
              <h4 class="text-secondary-400 mb-2">Related Tables:</h4>
              <div class="flex flex-wrap gap-2">
                <a href="#cmdb_software_product_model" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">cmdb_software_product_model</a>
                <a href="#alm_license" class="bg-primary-700 px-2 py-1 rounded text-neutral-300 hover:text-accent-300 transition-colors font-mono">alm_license</a>
              </div>
            </div>
          </div>
          
          <h2 class="text-2xl font-heading font-bold mb-4 mt-12 text-accent-400">Entitlement Implementation Patterns</h2>
          <GeometricBorder type="horizontal" color="accent" className="mb-6 w-24" />
          
          <div class="bg-primary-800 p-6 rounded-lg border border-primary-700 mb-8">
            <h3 class="text-xl font-heading mb-4 text-secondary-400">Common Implementation Patterns</h3>
            <p class="text-neutral-300 mb-6">
              Several patterns emerge in entitlement implementations across organizations:
            </p>
            
            <div class="space-y-6">
              <div class="border-l-4 border-accent-500 pl-4">
                <h4 class="font-bold text-lg text-accent-400 mb-2">User-Based Entitlements</h4>
                <p class="text-neutral-300">
                  Rights tied to specific users or user counts. This pattern is common for productivity
                  capabilities and personal tools.
                </p>
              </div>
              
              <div class="border-l-4 border-accent-500 pl-4">
                <h4 class="font-bold text-lg text-accent-400 mb-2">Capacity-Based Entitlements</h4>
                <p class="text-neutral-300">
                  Rights based on processing capacity, such as cores, nodes, or compute units.
                  Common for infrastructure capabilities.
                </p>
              </div>
              
              <div class="border-l-4 border-accent-500 pl-4">
                <h4 class="font-bold text-lg text-accent-400 mb-2">Usage-Based Entitlements</h4>
                <p class="text-neutral-300">
                  Rights that vary with actual consumption levels, common in cloud and SaaS models.
                  Often includes tiered pricing based on volume.
                </p>
              </div>
              
              <div class="border-l-4 border-accent-500 pl-4">
                <h4 class="font-bold text-lg text-accent-400 mb-2">Enterprise-Wide Entitlements</h4>
                <p class="text-neutral-300">
                  Unlimited rights across an organization, often with pricing based on
                  organizational size or revenue.
                </p>
              </div>
            </div>
          </div>
        </div>
        
        <!-- Story Sidebar -->
        <div class="lg:col-span-3 space-y-6 h-fit sticky top-24">
          <NarrativeSidebar 
            character="silas" 
            title="Entitlements in Mirador"
            className="mb-6"
          >
            Every capability needs authorization from one of the city-states. Argos citizens are tagged with digital access rights to use specific Capabilities via neural implants.
          </NarrativeSidebar>
          
          <NarrativeSidebar 
            character="nova" 
            title="Publisher Agreements"
            className="mb-6"
          >
            In Mirador's political system, each city-state acts as a "publisher" of capabilities, signing treaties that outline which citizens may use their technology and under what conditions.
          </NarrativeSidebar>
          
          <NarrativeSidebar 
            character="enrique" 
            title="Black Market Licensing"
            className="mb-6"
          >
            The resistance has found ways to bypass official entitlements, redistributing access to capabilities outside of official channels. This is why the city-states are so aggressive about enforcement.
          </NarrativeSidebar>
          
          <NarrativeSidebar 
            character="victoria" 
            title="Cultural Impact"
            className="mb-6"
          >
            The entitlement system has created an entire social hierarchy in Mirador, with citizens often judged by the quality and quantity of capabilities they're entitled to access.
          </NarrativeSidebar>
        </div>
      </div>
    </div>
  </div>
</BaseLayout> 